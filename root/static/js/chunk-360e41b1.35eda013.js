(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-360e41b1"],{3037:function(e,t,a){},"3f7a":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{close:e.handleClose}},[e._t("default")],2)},r=[],o={props:{dialogTitle:{type:String,required:!0},dialogVisible:{type:Boolean,default:!1}},methods:{handleClose:function(){this.$emit("close")}}},i=o,n=(a("c76b"),a("2877")),s=Object(n["a"])(i,l,r,!1,null,"7ec0e28e",null);t["a"]=s.exports},"444f":function(e,t,a){"use strict";a("eb73")},b3a5:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-main"},[a("d-search",{attrs:{nameOne:"型号搜索"},on:{search:e.searchFn}}),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"result"},[a("div",{staticClass:"operation-btn"},[a("my-buttom",{attrs:{bcColor:"orange",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){return e.clickAddBtn("新增设备类型")}}},[e._v("新建")])],1),a("div",{staticClass:"result-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"String"}},[a("el-table-column",{attrs:{prop:"itemIndex",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"型号名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"model",label:"型号编码","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"image",label:"设备图片","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"block"},[a("el-image",{staticStyle:{width:"24px",height:"24px"},attrs:{src:e.row.image,round:"",fit:"fit"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"vmRow",label:"货道行","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"vmCol",label:"货道列","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"channelMaxCapacity",label:"设备容量","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",prop:"taskId"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operationBtn",staticStyle:{"margin-right":"20px"},attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleClick(t.row,"操作")}}},[e._v("操作 ")]),a("el-button",{staticClass:"operationBtn color",attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleClick(t.row,"删除")}}},[e._v("删除 ")])]}}])})],1),a("my-pagination",{attrs:{totalPage:e.totalPage,totalCount:e.totalCount,pageIndex:e.pageIndex},on:{upPage:e.upPage,nextPage:e.nextPage}})],1)])]),a("d-dialog",{attrs:{dialogTitle:e.dialogTitle,dialogVisible:e.equipmentShow},on:{close:e.closeDialog}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"型号名称",prop:"name"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"型号编码",prop:"model"}},[a("el-input",{attrs:{size:"medium",maxlength:"15","show-word-limit":"",placeholder:"请输入（限制数字、字母、中划线、下划线）"},model:{value:e.ruleForm.model,callback:function(t){e.$set(e.ruleForm,"model",t)},expression:"ruleForm.model"}})],1),a("el-form-item",{attrs:{label:"货道行数",prop:"vmRow"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10,placeholder:"请输入",size:"medium"},model:{value:e.ruleForm.vmRow,callback:function(t){e.$set(e.ruleForm,"vmRow",t)},expression:"ruleForm.vmRow"}})],1),a("el-form-item",{attrs:{label:"货道列数",prop:"vmCol"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10,size:"medium",placeholder:"请输入"},model:{value:e.ruleForm.vmCol,callback:function(t){e.$set(e.ruleForm,"vmCol",t)},expression:"ruleForm.vmCol"}})],1),a("el-form-item",{attrs:{label:"货道容量",prop:"channelMaxCapacity"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,size:"medium",max:10,placeholder:"请输入"},model:{value:e.ruleForm.channelMaxCapacity,callback:function(t){e.$set(e.ruleForm,"channelMaxCapacity",t)},expression:"ruleForm.channelMaxCapacity"}})],1),a("el-form-item",{attrs:{label:"设备图片",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"http-request":e.uploadImage}},[e.ruleForm.image?a("img",{staticClass:"avatar",attrs:{src:e.ruleForm.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("p",{staticStyle:{margin:"0",position:"relative",top:"-8px"}},[e._v(" 支持扩展名: jpg、png,文件不得大于100kb ")])],1)],1),a("div",{staticClass:"footer-btn"},[a("my-buttom",{attrs:{bcColor:"lightsalmon"},nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("取消")]),a("my-buttom",{attrs:{bcColor:"orange"},nativeOn:{click:function(t){return e.addVmType(t)}}},[e._v("确认")])],1)],1)],1)},r=[],o=a("c7eb"),i=a("1da1"),n=(a("d3b7"),a("4de4"),a("b0c0"),a("159b"),a("c106")),s=a("ddb9"),c=a("2a7d"),u=a("1799"),m=a("3f7a"),p=a("7017"),d={components:{DSearch:n["a"],DResultList:s["a"],MyButtom:c["a"],MyPagination:u["a"],DDialog:m["a"]},data:function(){var e=this,t=function(t,a,l){var r;if(e.dialogTitle,"修改设备类型"===e.dialogTitle){var o=e.changeName;r=e.tableData.filter((function(e){return e.name!==o})).some((function(e){return e.name===a}))}r?l(new Error("型号名称重复")):l()},a=function(t,a,l){var r;if("新增设备类型"===e.dialogTitle&&(r=e.tableData.some((function(e){return e.model===a}))),"修改设备类型"===e.dialogTitle){var o=e.changeModel;r=e.tableData.filter((function(e){return e.model!==o})).some((function(e){return e.model===a}))}r?l(new Error("型号编码重复")):l()};return{searchParams:{},searchList:[],tableData:[],pageIndex:"",totalPage:"",totalCount:"",loading:!1,equipmentShow:!1,dialogTitle:"新增设备类型",ruleForm:{name:"",model:"",vmRow:null,vmCol:null,channelMaxCapacity:null,image:""},rules:{name:[{required:!0,message:"请输入",trigger:"blur"},{validator:t,trigger:"blur"}],model:[{required:!0,message:"请输入",trigger:"blur"},{pattern:/^[A-Za-z0-9_-]+$/,message:"请输入合法的型号编码",trigger:"blur"},{validator:a,tiggers:"blur"}],vmRow:[{required:!0,message:"请选择",trigger:"blur"}],vmCol:[{required:!0,message:"请选择",trigger:"blur"}],channelMaxCapacity:[{required:!0,message:"请选择",trigger:"blur"}],image:[{required:!0,message:"请上传图片",trigger:"blur"}]},changeName:"",changeModel:""}},created:function(){this.getTypeList(this.searchParams)},methods:{getTypeList:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(p["i"])(e);case 3:l=a.sent,t.pageIndex=l.pageIndex,t.totalPage=l.totalPage,t.totalCount=l.totalCount,t.changeTableData(l.currentPageRecords),t.loading=!1;case 9:case"end":return a.stop()}}),a)})))()},changeTableData:function(e){var t=this,a=e;a.forEach((function(e,l){e.itemIndex=10*(t.pageIndex-1)+l+1,t.tableData=a}))},handleClick:function(e,t){var a=this;return Object(i["a"])(Object(o["a"])().mark((function l(){return Object(o["a"])().wrap((function(l){while(1)switch(l.prev=l.next){case 0:if("操作"===t&&(a.dialogTitle="修改设备类型",a.equipmentShow=!0,a.ruleForm={name:e.name,model:e.model,vmRow:e.vmRow,vmCol:e.vmCol,channelMaxCapacity:e.channelMaxCapacity,image:e.image,typeId:e.typeId},a.changeName=e.name,a.changeModel=e.model),"删除"!==t){l.next=5;break}return l.next=4,Object(p["c"])(e.typeId);case 4:a.getTypeList(a.searchParams);case 5:case"end":return l.stop()}}),l)})))()},upPage:function(){this.getTypeList({pageIndex:--this.pageIndex,pageSize:10,isRepair:!1})},nextPage:function(){this.getTypeList({pageIndex:++this.pageIndex,pageSize:10,isRepair:!1})},searchFn:function(e){this.getTypeList({name:e})},clickAddBtn:function(){this.equipmentShow=!0,this.dialogTitle="新增设备类型"},uploadImage:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(p["j"])(e.file);case 2:t.ruleForm.image=a.sent,t.$message.success("头像上传成功");case 4:case"end":return a.stop()}}),a)})))()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/100;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 100KB!"),t&&a},closeDialog:function(){this.equipmentShow=!1,this.$refs.ruleForm.clearValidate(),this.ruleForm={name:"",model:"",vmRow:"",vmCol:"",channelMaxCapacity:"",image:""}},addVmType:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"新增设备类型"!==e.dialogTitle){t.next=6;break}return t.next=4,Object(p["a"])(e.ruleForm);case 4:e.getTypeList(e.searchParams),e.closeDialog();case 6:if("修改设备类型"!==e.dialogTitle){t.next=13;break}return t.next=9,Object(p["b"])(e.ruleForm);case 9:a=t.sent,console.log(a),e.getTypeList(e.searchParams),e.closeDialog();case 13:t.next=17;break;case 15:t.prev=15,t.t0=t["catch"](0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})))()}}},g=d,b=(a("444f"),a("2877")),h=Object(b["a"])(g,l,r,!1,null,"4c279ba9",null);t["default"]=h.exports},c76b:function(e,t,a){"use strict";a("3037")},eb73:function(e,t,a){}}]);