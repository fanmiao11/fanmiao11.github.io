(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f4d0a04"],{"0510":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-main"},[a("d-search",{attrs:{nameOne:"设备编号"},on:{search:t.searchFn}}),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"result"},[a("div",{staticClass:"result-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"String"}},[a("el-table-column",{attrs:{prop:"itemIndex",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"innerCode",label:"设备编号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"type.name",label:"设备型号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"node.addr",label:"详细地址",width:"300","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"vmStatus",label:"运营状态","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"status",label:"设备状态",width:"250","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.status(e.row.status),(function(e,n){return a("span",{key:n,staticClass:"statusBtn",class:{faultStatusBtn:e.color}},[t._v(t._s(e.text))])}))}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",prop:"taskId"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"operationBtn",attrs:{type:"text",size:"medium"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("查看详情 ")])]}}])})],1),a("my-pagination",{attrs:{totalPage:t.totalPage,totalCount:t.totalCount,pageIndex:t.pageIndex},on:{upPage:t.upPage,nextPage:t.nextPage}})],1)])]),a("d-dialog",{attrs:{dialogVisible:t.detailsShow,dialogTitle:"设备详情"},on:{close:function(e){t.detailsShow=!1}}},[a("div",{staticClass:"stats"},[a("div",[t._v(" 销售量："),a("span",[t._v(t._s(t.skuCollect))])]),a("div",[t._v(" 销售额："),a("span",[t._v(t._s(t.orderAmount))])]),a("div",[t._v(" 补货次数："),a("span",[t._v(t._s(t.supplyCount))])]),a("div",[t._v(" 维修次数："),a("span",[t._v(t._s(t.repairCount))])])]),a("div",{staticClass:"title"},[t._v("商品销量（月）")]),a("div",{staticClass:"list"},[t.skuList.length?a("el-row",t._l(t.skuList,(function(e,n){return a("el-col",{key:n,attrs:{span:6}},[t._v(t._s(e.skuName)+":"+t._s(e.count))])})),1):a("el-row",[a("el-col",{attrs:{span:24}},[t._v("当前设备未销售商品")])],1)],1)])],1)},s=[],o=a("c7eb"),r=a("1da1"),i=(a("d3b7"),a("159b"),a("13d5"),a("c106")),l=a("ddb9"),c=a("2a7d"),u=a("3f7a"),d=a("1799"),p=a("5a0c"),h=a.n(p),f=a("7017"),g={components:{DSearch:i["a"],DResultList:l["a"],MyButtom:c["a"],MyPagination:d["a"],DDialog:u["a"]},data:function(){return{searchParams:{},searchList:[],tableData:[],pageIndex:"",totalPage:"",totalCount:"",loading:!1,innerCode:"",detailsShow:!1,repairCount:"",supplyCount:"",skuCollect:"",skuList:[],orderAmount:""}},created:function(){this.getSearchList(this.searchParams)},methods:{getSearchList:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,Object(f["f"])(t);case 3:n=a.sent,e.pageIndex=n.pageIndex,e.totalPage=n.totalPage,e.totalCount=n.totalCount,e.changeTableData(n.currentPageRecords),e.loading=!1;case 9:case"end":return a.stop()}}),a)})))()},changeTableData:function(t){var e=this,a=t;a.forEach((function(t,n){0===t.vmStatus?t.vmStatus="未投放":1===t.vmStatus?t.vmStatus="运营":t.vmStatus="撤机",t.itemIndex=10*(e.pageIndex-1)+n+1,e.tableData=a}))},handleClick:function(t,e){var a=this;return Object(r["a"])(Object(o["a"])().mark((function e(){var n,s,r,i,l,c;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="2022-08-01",h()(new Date),s=h()().format("YYYY-MM-DD"),a.detailsShow=!0,e.next=6,Object(f["e"])(t.innerCode,n,s);case 6:return r=e.sent,a.repairCount=r,e.next=10,Object(f["h"])(t.innerCode,n,s);case 10:return i=e.sent,a.supplyCount=i,e.next=14,Object(f["g"])(t.innerCode,n,s);case 14:return l=e.sent,a.skuList=l,console.log(a.skuList),a.skuCollect=l.reduce((function(t,e){return t+=e.count,t}),0),e.next=20,Object(f["d"])(t.innerCode,"2022-08-01 00:00:00",h()(new Date).format("YYYY-MM-DD HH:mm:ss"));case 20:c=e.sent,a.orderAmount=c;case 22:case"end":return e.stop()}}),e)})))()},status:function(t){var e=[];return t["10001"]?e.push({text:"在线",color:!1}):e.push({text:"离线",color:!0}),t["10002"]?e.push({text:"货道",color:!1}):e.push({text:"货道  ",color:!0}),t["10003"]?e.push({text:"传动轴",color:!1}):e.push({text:"传动轴",color:!0}),e},upPage:function(){this.getSearchList({pageIndex:--this.pageIndex,pageSize:10})},nextPage:function(){this.getSearchList({pageIndex:++this.pageIndex,pageSize:10,isRepair:!1})},searchFn:function(t){this.getSearchList({innerCode:t})}}},v=g,b=(a("e1ee"),a("2877")),m=Object(b["a"])(v,n,s,!1,null,"68fe4481",null);e["default"]=m.exports},"13d5":function(t,e,a){"use strict";var n=a("23e7"),s=a("d58f").left,o=a("a640"),r=a("ae40"),i=o("reduce"),l=r("reduce",{1:0});n({target:"Array",proto:!0,forced:!i||!l},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3037:function(t,e,a){},"3f7a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog",attrs:{title:t.dialogTitle,visible:t.dialogVisible},on:{close:t.handleClose}},[t._t("default")],2)},s=[],o={props:{dialogTitle:{type:String,required:!0},dialogVisible:{type:Boolean,default:!1}},methods:{handleClose:function(){this.$emit("close")}}},r=o,i=(a("c76b"),a("2877")),l=Object(i["a"])(r,n,s,!1,null,"7ec0e28e",null);e["a"]=l.exports},c16e:function(t,e,a){},c76b:function(t,e,a){"use strict";a("3037")},d58f:function(t,e,a){var n=a("1c0b"),s=a("7b0b"),o=a("44ad"),r=a("50c4"),i=function(t){return function(e,a,i,l){n(a);var c=s(e),u=o(c),d=r(c.length),p=t?d-1:0,h=t?-1:1;if(i<2)while(1){if(p in u){l=u[p],p+=h;break}if(p+=h,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=h)p in u&&(l=a(l,u[p],p,c));return l}};t.exports={left:i(!1),right:i(!0)}},e1ee:function(t,e,a){"use strict";a("c16e")}}]);