(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0300"],{"415b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-main"},[a("my-search",{attrs:{nameOne:"商品类型搜索"},on:{search:e.searchBtn}}),a("result-list",{attrs:{tableArr:e.tableArr,operation:e.operationArr,tableData:e.tableData,totalPage:e.totalPage,totalCount:e.totalCount,pageIndex:e.pageIndex},on:{upPage:e.upPage,nextPage:e.nextPage,operationBtn:e.operationBtn,clickAddBtn:e.clickAddBtn}}),a("my-dialog",{attrs:{dialogTitle:"新增商品类型",dialogVisible:e.addOpreation},on:{close:function(t){e.addOpreation=!1}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品类型名称：",prop:"className"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.formData.className,callback:function(t){e.$set(e.formData,"className",t)},expression:"formData.className"}})],1),a("el-form-item",[a("el-button",{on:{click:e.cancleFn}},[e._v("取消")]),a("el-button",{on:{click:e.saveFn}},[e._v("确认")])],1)],1)],1),a("my-dialog",{attrs:{dialogTitle:"修改商品类型",dialogVisible:e.editOpreation},on:{close:function(t){e.editOpreation=!1}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品类型名称：",prop:"className"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.formData.className,callback:function(t){e.$set(e.formData,"className",t)},expression:"formData.className"}})],1),a("el-form-item",[a("el-button",{on:{click:e.cancleFn}},[e._v("取消")]),a("el-button",{on:{click:e.saveFn}},[e._v("确认")])],1)],1)],1)],1)},s=[],r=a("c7eb"),o=a("1da1"),c=(a("d3b7"),a("4de4"),a("159b"),a("c106")),i=a("ddb9"),l=a("3f7a"),u=a("c40e"),d={components:{MySearch:c["a"],ResultList:i["a"],MyDialog:l["a"]},data:function(){var e=this,t=function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a,n,s){var o,c,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=!1,t.next=3,Object(u["g"])({className:n});case 3:c=t.sent,e.addOpreation?"0"!==c.totalCount&&(o=!0):e.editOpreation&&(o="0"!==c.totalCount&&(null===(i=c.currentPageRecords)||void 0===i?void 0:i.filter((function(t){return t.classId!==e.formData.classId})).some((function(e){return e.className===n})))),o?s(new Error("名称重复")):s();case 6:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}();return{searchText:"",tableArr:[{prop:"className",label:"商品类型名称"}],operationArr:{opeWidth:"200",ope:[{title:"修改",color:!1},{title:"删除",color:!0}]},tableData:[],pageIndex:"",totalPage:"",totalCount:"",addOpreation:!1,editOpreation:!1,formData:{className:"",classId:""},rules:{className:[{required:!0,message:"请输入",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.getskuClass()},methods:{searchBtn:function(e){this.searchText=e,this.getskuClass({className:e})},clickAddBtn:function(){this.addOpreation=!0},cancleFn:function(){this.addOpreation?this.addOpreation=!1:this.editOpreation&&(this.editOpreation=!1),this.$refs.form.resetFields(),this.formData={className:""}},saveFn:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=16;break}if(!e.addOpreation){t.next=8;break}return t.next=4,Object(u["a"])(e.formData.className);case 4:e.getskuClass(),e.addOpreation=!1,t.next=13;break;case 8:if(!e.editOpreation){t.next=13;break}return t.next=11,Object(u["d"])(e.formData);case 11:e.getskuClass(),e.editOpreation=!1;case 13:e.formData={className:""},t.next=18;break;case 16:return console.log("操作失败"),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getskuClass:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["g"])(e);case 2:n=a.sent,t.pageIndex=n.pageIndex,t.totalPage=n.totalPage,t.totalCount=n.totalCount,t.tableData=n.currentPageRecords,t.tableData.forEach((function(e,a){return e.itemIndex=10*(t.pageIndex-1)+a+1}));case 8:case"end":return a.stop()}}),a)})))()},operationBtn:function(e,t){var a=this;console.log(e),"修改"===t?(this.editOpreation=!0,this.formData.className=e.className,this.formData.classId=e.classId):"删除"===t&&this.$confirm("此操作将永久删除该商品类型, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["c"])(e.classId);case 2:a.$message({type:"success",message:"删除成功!"}),a.getskuClass();case 4:case"end":return t.stop()}}),t)})))).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},upPage:function(){this.getskuClass({className:this.searchText,pageIndex:--this.pageIndex,pageSize:10})},nextPage:function(){this.getskuClass({className:this.searchText,pageIndex:++this.pageIndex,pageSize:10})}}},p=d,m=a("2877"),f=Object(m["a"])(p,n,s,!1,null,null,null);t["default"]=f.exports}}]);