(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23b88fde"],{"05c6":function(e,t,a){},"133c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-main"},[a("my-search",{attrs:{nameOne:"商品类型搜索"},on:{search:e.searchBtn}}),a("result-list",{staticClass:"result",attrs:{isShowSecondBtn:!0,secondBtnContent:"导入数据",tableArr:e.tableArr,operation:e.operationArr,tableData:e.tableData,totalPage:e.totalPage,totalCount:e.totalCount,pageIndex:e.pageIndex},on:{upPage:e.upPage,nextPage:e.nextPage,operationBtn:e.operationBtn,clickAddBtn:e.clickAddBtn,clickSecondBtn:e.clickSecondBtn}}),a("my-dialog",{attrs:{dialogTitle:"新增商品",dialogVisible:e.addOpreation},on:{close:function(t){e.addOpreation=!1}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品名称：",prop:"skuName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"15","show-word-limit":""},model:{value:e.formData.skuName,callback:function(t){e.$set(e.formData,"skuName",t)},expression:"formData.skuName"}})],1),a("el-form-item",{attrs:{label:"品牌：",prop:"brandName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.formData.brandName,callback:function(t){e.$set(e.formData,"brandName",t)},expression:"formData.brandName"}})],1),a("el-form-item",{attrs:{label:"商品价格(元)：",prop:"price"}},[a("el-input-number",{style:{width:"100%"},attrs:{"controls-position":"right",min:.5,step:.5,placeholder:"请输入"},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1),a("el-form-item",{attrs:{label:"商品类型：",prop:"className"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.classId,callback:function(t){e.$set(e.formData,"classId",t)},expression:"formData.classId"}},e._l(e.skuClass,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"规格：",prop:"unit"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.formData.unit,callback:function(t){e.$set(e.formData,"unit",t)},expression:"formData.unit"}})],1),a("el-form-item",{attrs:{label:"商品图片：",prop:"skuImage"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"http-request":e.httpRequest}},[e.formData.skuImage?a("img",{staticClass:"avatar",attrs:{src:e.formData.skuImage}}):a("i",{staticClass:"avatar-uploader-icon"},[a("svg-icon",{attrs:{"icon-class":"upload"}})],1),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 支持扩展名：jpg、png，文件不得大于100kb ")])])],1),a("el-form-item",[a("el-button",{on:{click:e.cancleFn}},[e._v("取消")]),a("el-button",{on:{click:e.saveFn}},[e._v("确认")])],1)],1)],1),a("my-dialog",{attrs:{dialogTitle:"数据导入",dialogVisible:e.importOpreation},on:{close:function(t){e.importOpreation=!1}}},[a("el-form",[a("el-upload",{ref:"fileImport",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-success":e.handlefileSuccess,"http-request":e.fileHttpRequest,"auto-upload":!1,limit:1}},[a("el-button",[e._v("上传文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 支持扩展名：xls、xlsx，文件不得大于1M ")])],1),a("el-form-item",[a("el-button",{on:{click:e.cancelImportFn}},[e._v("取消")]),a("el-button",{on:{click:e.saveImportFn}},[e._v("确认")])],1)],1)],1),a("my-dialog",{attrs:{dialogTitle:"修改商品",dialogVisible:e.editOpreation},on:{close:function(t){e.editOpreation=!1}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品名称：",prop:"skuName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"15","show-word-limit":""},model:{value:e.formData.skuName,callback:function(t){e.$set(e.formData,"skuName",t)},expression:"formData.skuName"}})],1),a("el-form-item",{attrs:{label:"品牌：",prop:"brandName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.formData.brandName,callback:function(t){e.$set(e.formData,"brandName",t)},expression:"formData.brandName"}})],1),a("el-form-item",{attrs:{label:"商品价格(元)：",prop:"price"}},[a("el-input-number",{style:{width:"100%"},attrs:{"controls-position":"right",min:0,step:.5,placeholder:"请输入"},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1),a("el-form-item",{attrs:{label:"商品类型："}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.classId,callback:function(t){e.$set(e.formData,"classId",t)},expression:"formData.classId"}},e._l(e.skuClass,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"规格：",prop:"unit"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.formData.unit,callback:function(t){e.$set(e.formData,"unit",t)},expression:"formData.unit"}})],1),a("el-form-item",{attrs:{label:"商品图片：",prop:"skuImage"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"http-request":e.httpRequest}},[e.formData.skuImage?a("img",{staticClass:"avatar",attrs:{src:e.formData.skuImage}}):a("i",{staticClass:"avatar-uploader-icon"},[a("svg-icon",{attrs:{"icon-class":"upload"}})],1),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 支持扩展名：jpg、png，文件不得大于100kb ")])])],1),a("el-form-item",[a("el-button",{on:{click:e.cancleFn}},[e._v("取消")]),a("el-button",{on:{click:e.saveFn}},[e._v("确认")])],1)],1)],1)],1)},s=[],n=a("c7eb"),o=a("1da1"),i=(a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("b0c0"),a("c106")),l=a("ddb9"),c=a("3f7a"),u=a("c40e"),m={data:function(){var e=function(){var e=Object(o["a"])(Object(n["a"])().mark((function e(t,a,r){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();return{searchText:"",tableArr:[{prop:"skuName",label:"商品名称"},{prop:"skuImage",label:"商品图片"},{prop:"brandName",label:"品牌"},{prop:"unit",label:"规格"},{prop:"price",label:"商品价格"},{prop:"className",label:"商品类型"},{prop:"createTime",label:"创建日期"}],operationArr:{opeWidth:"100",ope:[{title:"修改",color:!1}]},tableData:[],pageIndex:"",totalPage:"",totalCount:"",addOpreation:!1,editOpreation:!1,importOpreation:!1,formData:{skuName:"",brandName:"",price:void 0,classId:"",unit:"",skuImage:"",skuId:""},rules:{skuName:[{required:!0,message:"请输入",trigger:"blur"},{validator:e,trigger:"blur"}],brandName:[{required:!0,message:"请输入",trigger:"blur"},{validator:e,trigger:"blur"}],price:[{required:!0,message:"请输入",trigger:"blur"},{validator:e,trigger:"blur"}],classId:[{required:!0,message:"请输入",trigger:"blur"},{validator:e,trigger:"blur"}],unit:[{required:!0,message:"请输入",trigger:"blur"},{validator:e,trigger:"blur"}],skuImage:[{required:!0,message:"请输入",trigger:"blur"},{validator:e,trigger:"blur"}]},skuClass:{},imageUrl:""}},components:{MySearch:i["a"],ResultList:l["a"],MyDialog:c["a"]},created:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getskuClass();case 2:return t.next=4,e.getskus();case 4:case"end":return t.stop()}}),t)})))()},methods:{getskuClass:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a,r,s,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["g"])();case 2:return a=t.sent,r=a.totalCount,t.next=6,Object(u["g"])({pageSize:r});case 6:s=t.sent,o=s.currentPageRecords,o.forEach((function(t){e.skuClass[t.classId]=t.className}));case 9:case"end":return t.stop()}}),t)})))()},getskus:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["h"])(e);case 2:r=a.sent,t.pageIndex=r.pageIndex,t.totalCount=r.totalCount,t.totalPage=r.totalPage,t.tableData=r.currentPageRecords,t.tableData.forEach((function(e,a){return e.itemIndex=10*(t.pageIndex-1)+a+1})),t.tableData.forEach((function(e){e.className=t.skuClass[e.classId]}));case 9:case"end":return a.stop()}}),a)})))()},searchBtn:function(e){this.searchText=e,this.getskus({skuName:e})},clickAddBtn:function(){this.addOpreation=!0},clickSecondBtn:function(){this.importOpreation=!0},cancleFn:function(){this.addOpreation?this.addOpreation=!1:this.editOpreation&&(this.editOpreation=!1),this.$refs.form.resetFields(),this.formData={skuName:"",brandName:"",price:"",classId:"",unit:"",skuImage:"",skuId:""}},saveFn:function(){var e=this;console.log(this.formData),this.$refs.form.validate(function(){var t=Object(o["a"])(Object(n["a"])().mark((function t(a){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}if(!e.addOpreation){t.next=10;break}return t.next=4,Object(u["b"])({skuName:e.formData.skuName,skuImage:e.formData.skuImage,price:100*e.formData.price,classId:e.formData.classId,unit:e.formData.unit,brandName:e.formData.brandName});case 4:t.sent,e.$message.success("添加成功"),e.getskus(),e.addOpreation=!1,t.next=16;break;case 10:if(!e.editOpreation){t.next=16;break}return t.next=13,Object(u["e"])({skuName:e.formData.skuName,skuImage:e.formData.skuImage,price:100*e.formData.price,classId:e.formData.classId,unit:e.formData.unit,brandName:e.formData.brandName,skuId:e.formData.skuId});case 13:t.sent,e.getskus(),e.editOpreation=!1;case 16:e.formData={skuName:"",brandName:"",price:"",classId:"",unit:"",skuImage:""},t.next=21;break;case 19:return console.log("操作失败"),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},operationBtn:function(e,t){"修改"===t&&(this.editOpreation=!0,this.formData.skuName=e.skuName,this.formData.brandName=e.brandName,this.formData.price=e.price/100,this.formData.classId=e.classId,this.formData.className=e.className,this.formData.unit=e.unit,this.formData.skuImage=e.skuImage,this.formData.skuId=e.skuId)},upPage:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getskus({skuName:e.searchText,pageIndex:--e.pageIndex});case 2:case"end":return t.stop()}}),t)})))()},nextPage:function(){this.getskus({skuName:this.searchText,pageIndex:++this.pageIndex})},handleAvatarSuccess:function(e,t){this.formData.skuImage=URL.createObjectURL(t.raw)},httpRequest:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var r,s,o;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r="image/jpeg"==e.file.type||"image/png"==e.file.type,s=e.file.size/1024/1024<2,r||t.$message.error("上传图片只能是 JPG 或 PNG 格式!"),s||t.$message.error("上传图片大小不能超过 2MB!"),!r||1!=s){a.next=11;break}return o=new FormData,o.append("fileName",e.file),a.next=9,Object(u["f"])(o);case 9:t.formData.skuImage=a.sent,console.log(t.formData.skuImage);case 11:case"end":return a.stop()}}),a)})))()},handlefileSuccess:function(){this.importOpreation=!1},fileHttpRequest:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var r,s,o,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.file.name.substring(e.file.name.lastIndexOf(".")+1),s=e.file.size/1024/1024<1,o="xls"===r||"xlsx"===r,o?s||t.$message.warning("文件大小不得超过1M"):t.$message.warning("只能上传excel的文件"),!s||!o){a.next=10;break}return i=new FormData,i.append("fileName",e.file),a.next=9,Object(u["i"])(i);case 9:a.sent;case 10:case"end":return a.stop()}}),a)})))()},cancelImportFn:function(){this.importOpreation=!1},saveImportFn:function(){this.$refs.fileImport.submit()}}},p=m,d=(a("2f52"),a("2877")),f=Object(d["a"])(p,r,s,!1,null,null,null);t["default"]=f.exports},"2f52":function(e,t,a){"use strict";a("05c6")}}]);